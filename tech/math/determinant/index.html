<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/_img/windwhir.ico" rel="icon" />
  <title>行列式_计算 - WindWhir.top</title>
  <script src="determinant.js"></script>
  <script src="../matrix.js" async></script>
  <style>
    #zhishi{text-decoration: underline #f00;transition: 1s;}
    #jisuan{text-decoration: underline #0f0;}
    #zhishi:hover{color:#faa}
    #zhishi::after{
      content: "前往>";
      font-size: 1vh;
      display: inline-block;
      writing-mode: vertical-rl;
      text-orientation:upright;
      transform: translateY(0.5vh);
    }
    #jisuan::after{
      content: "当前v";
      font-size: 1vh;
      display: inline-block;
      writing-mode: vertical-rl;
      text-orientation:upright;
      transform: translateY(0.5vh);
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      color:#fff;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }
    html,body {
      height: 100vh;
      padding:5px;
      background: linear-gradient(135deg, #6e8efb, #a777e3);
      overflow: hidden;
    }
    section {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: auto;
    }
    .content {
      text-align: center;
      max-width: 90%;
    }
    .section-left {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      color: white;
    }
    .section-right {
      background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);
      color: #333;
    }
    table{
      border-left:#000 solid 2px ;
      border-right:#000 solid 2px ;
      padding-left:15px;
      padding-right:15px;
    }
    .matrix-cell {
        padding: 8px 15px;
        text-align: center;
        width: 55px;
        height: 40px;
    }
    
    input {
        width: 50px;
        height: 30px;
        text-align: center;
        font-size: 16px;
        color:#000;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 2px;
        text-shadow: 0 0 0 #fff;
    }
    /* 横屏样式 (左右分布) */
    @media (orientation: landscape) {
      main {
        flex-direction: row !important;
        font-size: 180% !important;
      }
    }
  </style>
</head>
<body>
  <header style="height:10vh">
    <h1 style="font-size: 4vh;">行列式 : <a id="zhishi" href="learn.html">知识</a> | <a id="jisuan">计算</a> </h1>
    <div style="font-size: 2vh">http://windwhir.top/10201 (建议<a href="javascript:alert('电脑:Ctrl+D\n微信:浏览器打开后按手机\n手机:手动更多>添加书签')">加书签</a>)
    </div>
  </header>
  <main style="display: flex;height: 84vh;border-radius: 10px;overflow: hidden;box-shadow: 0 4px 12px rgba(0,0,0,0.1);flex-direction: column;font-size: 150%;">
    <section style="background: linear-gradient(45deg, #f65, #fb9);color:#000">
      <div class="content">
        <table id="matrix" class="matrix"></table>
      </div>
    </section>
    <section style="background: linear-gradient(45deg, #11e, #39f);color:#fff">
      <div class="content">
        <span style="font-size: 150%;">计算结果：<b style="font-size: 150%;">--</b></span>
        <span id="xingzhi"></span><hr/>
        行列式阶数：
        <select id="matrixSize" style="background-color: #00f;font-size:90%;text-align: center;">
          <option value="2">2 x 2</option>
          <option value="3" selected>3 x 3</option>
          <option value="4">4 x 4</option>
          <option value="5">5 x 5</option>
        </select>
        <br/>
        - <a onclick="shuru()">快速填写</a> - <a onclick="quankong()">设置全空</a> -
      </div>
    </section>
  </main>
  <footer style="height:5vh;margin: 1vh;font-size: 2vh;">
    <img src="/_img/windwhir.ico" />风吹呼呼WindWhir | +x - <a href="/">空间主页</a> - <a href="../">数学</a>
  </footer>
  <script>    
    const matrixSizeSelect = document.getElementById('matrixSize');
    let size = 3;
    
    // 根据尺寸创建矩阵输入
    function createMatrixInputs() {
        size = parseInt(matrixSizeSelect.value);
        createMatrix('matrix', size);
    }
    
    // 创建单个矩阵输入表
    function createMatrix(matrixId, size) {
        const table = document.getElementById(matrixId);
        table.innerHTML = '';
        
        for (let i = 0; i < size; i++) {
            const row = document.createElement('tr');
            
            for (let j = 0; j < size; j++) {
                const cell = document.createElement('td');
                cell.className = 'matrix-cell';
                
                const input = document.createElement('input');
                input.type = 'text';
                input.value = (i === j) ? '1' : '0';
                input.addEventListener('input',determinant)
                input.dataset.row = i;
                input.dataset.col = j;
                
                cell.appendChild(input);
                row.appendChild(cell);
            }
            
            table.appendChild(row);
        }
        determinant()
    }
    
    // 获取矩阵输入值
    function getMatrixValues(matrixId, size) {
        const matrix = [];
        
        for (let i = 0; i < size; i++) {
            const row = [];
            
            for (let j = 0; j < size; j++) {
                const input = document.querySelector(`#${matrixId} input[data-row="${i}"][data-col="${j}"]`);
                let value = parseFloat(input.value) || 0;
                row.push(value);
            }
            
            matrix.push(row);
        }
        
        return matrix;
    }
   
   function shuru(){
     const inputs=document.querySelectorAll("input");
     for(let i=0;i<size;i++){
       let as=prompt(`请输入第${i+1}行的新数字，元素间用空格隔开`).split(" ");
       for(let j=0;j<size;j++){
         inputs[i*size+j].value= (as[j]===undefined) ? "" : as[j] ;
       }
     }
     determinant()
   }
   function quankong(){
     const inputs=document.querySelectorAll("input");
     for(let i=0;i<inputs.length;i++){
       inputs[i].value=""
     }
     determinant()
   }
   
    // 初始化
    document.addEventListener('DOMContentLoaded', function() {
        createMatrixInputs();
        matrixSizeSelect.addEventListener('change', createMatrixInputs);
    })
  </script>
</body>
</html>